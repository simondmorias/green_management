# F3-T5 - Live Intent Highlighting - Debounced Input Handler

## Document Control
**Feature Name & Link:** [Live Intent Highlighting for Conversational Interface](../feature.md)
**Plan Name & Link:** [Implementation Plan](../plan.md)
**Date Created:** September 1, 2025  
**Status:** Not Started

---

## Overview
Implement debounced API calls from the chat input component to trigger entity recognition after user stops typing, with proper loading states and error handling.

---

## Task Requirements

### Task1: Debounced Entity Recognition Integration
**Status:** Not Started

**Description:**
Modify the chat input component to call the entity recognition API with a 500ms debounce after the user stops typing. Handle loading states, errors, and integrate the highlighted response into the input display.

**Technical Details:**
- Files to create/modify:
  - `/gain/apps/web/components/chat/ChatInput.tsx` - Add debounced recognition
  - `/gain/apps/web/contexts/EntityRecognitionContext.tsx` - State management
  - `/gain/apps/web/services/entityApi.ts` - API client service
  - `/gain/apps/web/utils/debounce.ts` - Debounce utility
  - `/gain/apps/web/components/chat/LoadingIndicator.tsx` - Subtle loading UI

- Key implementation points:
  - Implement 500ms debounce on text input changes
  - Cancel pending requests when new input arrives
  - Show subtle pulse animation during API calls
  - Handle API errors gracefully (fallback to plain text)
  - Maintain input focus during updates
  - Cache responses for identical queries (client-side)
  - Preserve text selection during re-renders
  - Add abort controller for request cancellation
  - Implement retry logic for network failures

**Acceptance Criteria:**
- [ ] API called 500ms after typing stops
- [ ] Previous requests cancelled on new input
- [ ] Loading indicator visible during processing
- [ ] Errors handled without breaking input
- [ ] Input focus maintained throughout
- [ ] Client-side cache reduces duplicate calls
- [ ] Text selection preserved during updates
- [ ] Network failures retry up to 3 times
- [ ] Component remains responsive during API calls

## Developer Completion Details

*To be completed by the developer at the end of the task implementation*

### Metadata

- Repo Name: Gain
- Branch Name: [Branch Name]

### Summary of Changes

**Overview**
*Write 500 words to summarise what was done and any issues discovered*

**Testing Notes:**
*Specific test scenarios to verify*

**Definition of Done:**
- [ ] Code implemented and peer reviewed
- [ ] Tests written and passing
- [ ] Documentation updated
- [ ] No linting errors
- [ ] Ready for PR and Approval