# F3-T4 - Live Intent Highlighting - Frontend Entity Pills Components

## Document Control
**Feature Name & Link:** [Live Intent Highlighting for Conversational Interface](../feature.md)
**Plan Name & Link:** [Implementation Plan](../plan.md)
**Date Created:** September 1, 2025  
**Status:** Not Started

---

## Overview
Create React components for rendering highlighted entities as interactive pills in the chat interface, with proper styling and accessibility support.

---

## Task Requirements

### Task1: Entity Pill React Components
**Status:** Not Started

**Description:**
Implement React components for displaying recognized entities as styled pills inline with chat text. Components should support different entity types with distinct visual treatments, hover states, and click interactions while maintaining accessibility standards.

**Technical Details:**
- Files to create/modify:
  - `/gain/apps/web/components/chat/EntityPill.tsx` - Individual pill component
  - `/gain/apps/web/components/chat/HighlightedText.tsx` - Text parser and renderer
  - `/gain/apps/web/components/chat/EntityPill.module.css` - Pill styling
  - `/gain/apps/web/hooks/useEntityRecognition.ts` - Custom hook for recognition
  - `/gain/apps/web/types/entities.ts` - TypeScript types
  - `/gain/apps/web/components/chat/ChatInput.tsx` - Modify to add recognition

- Key implementation points:
  - Parse XML-style tags from API response
  - Render pills with type-specific gradients (manufacturers=blue, products=green, metrics=purple, time=orange)
  - Add hover effects with scale and shadow
  - Support keyboard navigation (Tab, Enter, Delete)
  - Show confidence indicators for uncertain matches (dashed border)
  - Preserve cursor position during re-renders
  - Implement smooth transitions (200ms)
  - Ensure WCAG AA color contrast compliance
  - Add screen reader announcements

**Acceptance Criteria:**
- [ ] Pills render correctly for all entity types
- [ ] Type-specific colors and gradients applied
- [ ] Hover states work with proper animations
- [ ] Keyboard navigation fully functional
- [ ] Low-confidence entities show dashed borders
- [ ] Cursor position preserved during updates
- [ ] Component renders in < 50ms
- [ ] Accessibility audit passes WCAG AA
- [ ] Unit tests for component rendering passing

## Developer Completion Details

*To be completed by the developer at the end of the task implementation*

### Metadata

- Repo Name: Gain
- Branch Name: [Branch Name]

### Summary of Changes

**Overview**
*Write 500 words to summarise what was done and any issues discovered*

**Testing Notes:**
*Specific test scenarios to verify*

**Definition of Done:**
- [ ] Code implemented and peer reviewed
- [ ] Tests written and passing
- [ ] Documentation updated
- [ ] No linting errors
- [ ] Ready for PR and Approval